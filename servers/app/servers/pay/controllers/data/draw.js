////////////////////////////////////////////////////////////////////////////////
// Draw Operation
// 抽取一次奖励, 返回奖励的item
// getDraw
////////////////////////////////////////////////////////////////////////////////

//==============================================================================
// import
//==============================================================================
var buzz_cst_game = require('../../src/buzz/cst/buzz_cst_game');
var buzz_cst_error = require('../../src/buzz/cst/buzz_cst_error');
var data_util = require('./data_util');
const logicResponse = require('../../../common/logicResponse');

//==============================================================================
// const
//==============================================================================
var ERROR_OBJ = buzz_cst_error.ERROR_OBJ;

var DEBUG = 0;
var ERROR = 1;


//==============================================================================
// public
//==============================================================================

//------------------------------------------------------------------------------
// definition
//------------------------------------------------------------------------------
exports.getDraw = getDraw;

//------------------------------------------------------------------------------
// implement
//------------------------------------------------------------------------------
/**
 * 抽取奖励(可抽取一次，也可以抽取十次)
 */
async function getDraw(data) {
    return new Promise(function(resolve, reject){
        myDao.getDraw(data, function (err, account) {
            if(err){
                logger.error('抽奖失败 err:', err);
                reject(err);
            }
            resolve(logicResponse.ask(account.toJSON()));
        });
    });
}

